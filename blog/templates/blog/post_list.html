{% extends "blog/base.html" %}
{% load l10n tz %}
{% load url_replace %}
{% load static %} <!--ãƒ«ãƒ¼ãƒ—å†…ã«è¨˜è¼‰ã—ãªã„ã€‚åŸºæœ¬æœ€ä¸Šéƒ¨ã«è¨˜è¼‰ã™ã‚‹-->
â€‹
{% block main %}
â€‹
<div style="display:inline-flex;"><h2><p>â­ï¸ ä¼šå“¡ãƒšãƒ¼ã‚¸ â­ï¸</p></h2>
    <h3 style="margin-left: 550px;"> <a href="{% url 'blog:mypage' %}">ğŸ”‘ ãƒã‚¤ãƒšãƒ¼ã‚¸ ğŸ”‘</a> </h3>
</div>
<p>ã¼ã£ã¡ã®{{ user }}ã•ã‚“ã€ãŠã‹ãˆã‚Šãªã•ã„ğŸ¤—</p>
<p><a href="{% url 'logout' %}">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a></p>
â€‹
<h2><p>â­ï¸ æ–°è¦æŠ•ç¨¿ â­ï¸</p></h2>
<p>{{ user }}ã•ã‚“ãŒç¾åœ¨ã€éå»ã«çµŒé¨“ã—ãŸã¼ã£ã¡ã®çµŒé¨“ã¯ãªã‚“ã§ã™ã‹ï¼Ÿ</p>
â€‹
<div style="display:inline-flex;">
    <p>ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ãªã©ã‚’æŠ•ç¨¿ã—ã¦ä¼šå“¡åŒå£«ã§èªã‚Šåˆã„ã¾ã›ã‚“ã‹ï¼Ÿ</p>
    <h5 style="margin-left: 30px;"><p><a href="{% url 'blog:create' %}"> ğŸ‘‰æŠ•ç¨¿ã™ã‚‹ğŸ‘ˆ </a></p></h5>
</div>
â€‹
â€‹
â€‹
<h2><p>â­ï¸ ãƒ–ãƒ­ã‚°ä¸€è¦§ â­ï¸</p></h2>
â€‹
<!--formã‚’æ¨ªä¸¦ã³ã«ã™ã‚‹-->
<div style="display:inline-flex; margin-bottom:30px;">
    
    <form class="form-inline my-2" method="GET" action="{% url 'blog:index' %}">
        <input type="text" class="form-control" name="query" value="{{request.GET.query}}"
               placeholder="ã‚¿ã‚¤ãƒˆãƒ«ã€æœ¬æ–‡ã‹ã‚‰ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢" style="width:250px;">
        <button type="submit" class="btn btn-primary" style="margin-right: 26px;">æ¤œç´¢</button>
    </form>
    
   
    <form class="form-inline my-2" method="GET">
        <select name="query_cate">
            {% for item in category_list %}
                {% if item.id == selected_category %}
            <option selected value="{{ item.id }}">{{ item.name }}</option>
â€‹
                <!--ã‚ã‹ã‚Šã«ãã„ãŒã€ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸æ™‚ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼çŠ¶æ…‹ã®å‡¦ç†-->
                {% else %}
            <option value="{{ item.id }}">{{ item.name }}</option>
â€‹
                {% endif %} 
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary" style="margin-right: 26px;">ã‚«ãƒ†ã‚´ãƒªãƒ¼æ¤œç´¢</button>
    </form>
â€‹
â€‹
    <form class="form-inline my-2" method="GET">
        <select name="query_tag">
            {% for item_tag in tags_list %}
                {% if item_tag.id == selected_tag %}
            <option selected value="{{ item_tag.id }}">{{ item_tag.name }}</option>
                {% else %}
            <option value="{{ item_tag.id }}">{{ item_tag.name }}</option>
                {% endif %} 
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary" style="margin-right: 26px;">ã‚¿ã‚°æ¤œç´¢</button>
    </form>
â€‹
    <form class="form-inline my-2" method="GET">
        <select name="query_like">
            {% for like in like_list %}
                {% if like.id == selected_like %}
            <option selected value="{{ like.id }}">{{ like.name }}</option>
                {% else %}
            <option value="{{ like.id }}">{{ like.name }}</option>
                {% endif %}
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary">ä¸¦ã³æ›¿ãˆ</button>
    </form>
â€‹
</div>
<!--formå¤–ã«è¨˜è¿°-->
{% comment %} {% csrf_token %} {% endcomment %}
â€‹
<div class="infinite-container">
    {% for post in object_list %}
    <div class="infinite-item">
        <a href="{% url 'blog:detail' post.id %}">{{ post.title }}</a> 
        <p>æŠ•ç¨¿è€…ï¼š{{ post.accessuser }} <time style="margin-left: 50px;">{{ post.updated|localtime|localize }}</time></p>

         <!--ã‚‚ã—ã„ã„ã­ã—ã¦ã„ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã ã£ãŸã‚‰ã€ã„ã„ã­ãƒœã‚¿ãƒ³ã‚’å…‰ã‚‰ã›ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒªãƒ­ãƒ¼ãƒ‰ã—ãŸã‚Šå†åº¦ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã€ã„ã„ã­ã—ãŸãƒœã‚¿ãƒ³ã¯å¸¸ã«å…‰ã‚‹-->
         <!--like-btnã¨{ã®é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ç„¡ã„ã¨ã€like-btnonã«ãªã£ã¦ã—ã¾ã†-->
         <!--request.userã§ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—å¯èƒ½ã€post.like.allã§ã„ã„ã­ã—ã¦ã‚‹å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—å¯èƒ½-->
         <button class="like-btn {% if request.user in post.like.all %}on{% endif %}"
                 data-href="{{ post.get_api_like_url }}" data-id="{{post.pk}}">
           <span class="liked-cnt like{{post.pk}}" id="like{{post.pk}}">{{ post.like.count }}</span>
           <i class="fas fa-thumbs-up"></i>
         </button>
    </div>
   {% endfor %}
</div>
â€‹
<div class="loading" style="display: none;">
    èª­ã¿è¾¼ã¿ä¸­...
</div>
â€‹
{% if page_obj.has_next %}
<a class="infinite-more-link" href="?{%  url_replace request 'page' page_obj.next_page_number %}">ã•ã‚‰ã«èª­ã¿è¾¼ã‚€</a>
{% endif %}
â€‹
<link rel="stylesheet" type="text/css" href="{% static 'style.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'like.css' %}" />
<link href="{% static 'fontawesome_free/css/all.min.css' %}" rel="stylesheet" type="text/css">
<script type="text/javascript" src="{% static 'like.js' %}"></script> <!--jsèª­ã¿è¾¼ã¿æ™‚ã¯ã€scriptã‚¿ã‚°ã‚’ä½¿ç”¨ã€‚srcã§èª­ã¿è¾¼ã¿ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŒ‡å®š-->
â€‹
{% endblock %}
â€‹
â€‹
{% block extrajs %}
<script>
var infinite = new Waypoint.Infinite({
    element: $('.infinite-container')[0],
    onBeforePageLoad: function () {
    $('.loading').show();
    },
    onAfterPageLoad: function () {
    $('.loading').hide();
    }
});
</script>
{% endblock %}