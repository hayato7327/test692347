{% extends "blog/base.html" %}

{% load static %} <!--ãƒ«ãƒ¼ãƒ—å†…ã«è¨˜è¼‰ã—ãªã„ã€‚åŸºæœ¬æœ€ä¸Šéƒ¨ã«è¨˜è¼‰ã™ã‚‹-->

{% block main %}

<div style="display:inline-flex;"><h2><p>â­ï¸ ä¼šå“¡ãƒšãƒ¼ã‚¸ â­ï¸</p></h2>
    <h3 style="margin-left: 550px;"> <a href="{% url 'blog:mypage' %}">ğŸ”‘ ãƒã‚¤ãƒšãƒ¼ã‚¸ ğŸ”‘</a> </h3>
</div>
<p>ã¼ã£ã¡ã®{{ user }}ã•ã‚“ã€ãŠã‹ãˆã‚Šãªã•ã„ğŸ¤—</p>
<p>8000/adminã§ç®¡ç†è€…ç”¨ç”»é¢ã¸</p>
<p><a href="{% url 'logout' %}">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a></p>

<h2><p>â­ï¸ æ–°è¦æŠ•ç¨¿ â­ï¸</p></h2>
<p>{{ user }}ã•ã‚“ãŒç¾åœ¨ã€éå»ã«çµŒé¨“ã—ãŸã¼ã£ã¡çµŒé¨“ã¯ãªã‚“ã§ã™ã‹ï¼Ÿ</p>

<div style="display:inline-flex;">
    <p>ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ãªã©ã‚’æŠ•ç¨¿ã—ã¦ä¼šå“¡åŒå£«ã§å‚·ã‚’èˆã‚åˆã„ã¾ã›ã‚“ã‹ï¼Ÿ</p>
    <h5 style="margin-left: 30px;"><p><a href="{% url 'blog:create' %}"> ğŸ‘‰æŠ•ç¨¿ã™ã‚‹ğŸ‘ˆ </a></p></h5>
</div>



<h2><p>â­ï¸ ã¼ã£ã¡ãƒ–ãƒ­ã‚°ä¸€è¦§ â­ï¸</p></h2>

<!--formã‚’æ¨ªä¸¦ã³ã«ã™ã‚‹-->
<div style="display:inline-flex; margin-bottom:30px;">
    
    <form class="form-inline my-2" method="GET" action="{% url 'blog:search' %}">
        <input type="text" class="form-control" name="query" value="{{request.GET.query}}"
          placeholder="ã‚¿ã‚¤ãƒˆãƒ«ã€æœ¬æ–‡ã‹ã‚‰ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢" style="width:250px;">
        <button type="submit" class="btn btn-primary" style="margin-right:50px;">æ¤œç´¢</button>
    </form>
    
   
    <form class="form-inline my-2" method="GET" action="{% url 'blog:search_category' %}">
        <select name="query_cate" style="height:39px; border-radius:5px; width:250px;">
            {% for item in category_list %}
                {% if item.id == selected_category %}
                    <option selected value="{{ item.id }}">{{ item.name }}</option>
                <!--ã‚ã‹ã‚Šã«ãã„ãŒã€ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸æ™‚ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼çŠ¶æ…‹ã®å‡¦ç†-->
                {% else %}
                    <option value="{{ item.id }}">{{ item.name }}</option>
                {% endif %} 
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary" style="margin-right:50px;">ã‚«ãƒ†ã‚´ãƒªãƒ¼æ¤œç´¢</button>
    </form>


    <form class="form-inline my-2" method="GET" action="{% url 'blog:search_tag' %}">
        <select name="query_tag" style="height:39px; border-radius:5px;">
            {% for item_tag in tags_list %}
                {% if item_tag.id == selected_tags %}
                    <option selected value="{{ item_tag.id }}">{{ item_tag.name }}</option>
                {% else %}
                    <option value="{{ item_tag.id }}">{{ item_tag.name }}</option>
                {% endif %} 
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary">ã‚¿ã‚°æ¤œç´¢</button>
    </form>
</div>
<!--formå¤–ã«è¨˜è¿°-->
{% comment %} {% csrf_token %} {% endcomment %}

<div class="infinite-container">
    {% for post in object_list %}
    <div class="infinite-item">
        <a href="{% url 'blog:detail' post.id %}">{{ post.title }}</a> 
        <p>æŠ•ç¨¿è€…ï¼š{{ post.accessuser }}</p>

         <!--ã‚‚ã—ã„ã„ã­ã—ã¦ã„ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã ã£ãŸã‚‰ã€ã„ã„ã­ãƒœã‚¿ãƒ³ã‚’å…‰ã‚‰ã›ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒªãƒ­ãƒ¼ãƒ‰ã—ãŸã‚Šå†åº¦ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã€ã„ã„ã­ã—ãŸãƒœã‚¿ãƒ³ã¯å¸¸ã«å…‰ã‚‹-->
         <!--like-btnã¨{ã®é–“ã«ã‚¹ãƒšãƒ¼ã‚¹ç„¡ã„ã¨ã€like-btnonã«ãªã£ã¦ã—ã¾ã†-->
         <!--request.userã§ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—å¯èƒ½ã€post.like.allã§ã„ã„ã­ã—ã¦ã‚‹å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—å¯èƒ½-->
        <button class="like-btn {% if request.user in post.like.all %}on{% endif %}"
                       data-href="{{ post.get_api_like_url }}" data-id="{{post.pk}}">
          <span class="liked-cnt" id="like{{post.pk}}">{{ post.like.count }}</span>
          <i class="fas fa-thumbs-up"></i>
        </button>
   </div>
   {% endfor %}
</div>

<div class="loading" style="display: none;">
    èª­ã¿è¾¼ã¿ä¸­...
</div>

{% if page_obj.has_next %}
<a class="infinite-more-link" href="?page={{ page_obj.next_page_number }}">ã•ã‚‰ã«èª­ã¿è¾¼ã‚€</a>
{% endif %}

<link rel="stylesheet" type="text/css" href="{% static 'like.css' %}" />
<link href="{% static 'fontawesome_free/css/all.min.css' %}" rel="stylesheet" type="text/css">
<script type="text/javascript" src="{% static 'like.js' %}"></script> <!--jsèª­ã¿è¾¼ã¿æ™‚ã¯ã€scriptã‚¿ã‚°ã‚’ä½¿ç”¨ã€‚srcã§èª­ã¿è¾¼ã¿ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŒ‡å®š-->

{% endblock %}


{% block extrajs %}
<script>
var infinite = new Waypoint.Infinite({
    element: $('.infinite-container')[0],
    onBeforePageLoad: function () {
    $('.loading').show();
    },
    onAfterPageLoad: function () {
    $('.loading').hide();
    }
});
</script>
{% endblock %}